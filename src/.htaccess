RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteRule ^404$ 404.php [L]
RewriteRule ^graphs$ graphs.php [L]
RewriteRule ^index$ index.php [L]
RewriteRule ^leaderboard$ leaderboard.php [L]
RewriteRule ^lootbox$ lootbox.php [L]
RewriteRule ^moderator$ moderator.php [L]
RewriteRule ^newsfeed$ newsfeed.php [L]
RewriteRule ^rank_card$ rank_card.php [L]
RewriteRule ^search$ search.php [L]
RewriteRule ^tutorial$ tutorial.php [L]

RewriteCond %{THE_REQUEST} \s/([^.]+)\.php [NC]
RewriteRule ^ /%1 [L,R=301]